/**
 * Auto-Generated API Routes  
 * Generated from #[buildamp_api] annotations in src/models/api/
 * 
 * âš ï¸  DO NOT EDIT THIS FILE MANUALLY
 * âš ï¸  Changes will be overwritten during next generation
 * 
 * This file replaces manual endpoint switching with individual Express routes
 * that include automatic validation, context injection, and WASM integration.
 */

/**
 * Register all auto-generated API routes
 * @param {Object} server - Server instance with Express app
 */
export default function registerApiRoutes(server) {
    console.log('ðŸš€ Registering auto-generated API routes...');
    
/**
 * Auto-generated route for SubmitCommentReq
 * Path: SubmitComment
 * Generated from: comments_api.rs
 */
server.app.post('/api/SubmitComment', async (req, res) => {
    const host = req.tenant?.host || 'localhost';
    
    try {
        // Extract request data
        let requestData = req.body;
        
        // Field validation

        
        // Ensure context exists
        if (!req.context) {
            req.context = { host };
        }
        
        // Context injection
        requestData = {
            ...requestData,
        host: req.context.host
        
        };
        
        // Call Elm business logic
        const elmService = server.getService('elm');
        if (!elmService) {
            throw new Error('Elm service not available');
        }
        
        const result = await elmService.callHandler('SubmitComment', requestData, {
            host,
            user_id: req.context?.user_id || null,
            is_extension: req.context?.is_extension || false,
            tenant: host
        });
        
        res.json(result);
        
    } catch (error) {
        console.error(`Error handling SubmitComment:`, error);
        res.status(400).json({ error: error.message });
    }
});

/**
 * Auto-generated route for GetFeedReq
 * Path: GetFeed
 * Generated from: feed_api.rs
 */
server.app.post('/api/GetFeed', async (req, res) => {
    const host = req.tenant?.host || 'localhost';
    
    try {
        // Extract request data
        let requestData = req.body;
        
        // Field validation

        
        // Ensure context exists
        if (!req.context) {
            req.context = { host };
        }
        
        // Context injection
        requestData = {
            ...requestData,
        host: req.context.host
        
        };
        
        // Call Elm business logic
        const elmService = server.getService('elm');
        if (!elmService) {
            throw new Error('Elm service not available');
        }
        
        const result = await elmService.callHandler('GetFeed', requestData, {
            host,
            user_id: req.context?.user_id || null,
            is_extension: req.context?.is_extension || false,
            tenant: host
        });
        
        res.json(result);
        
    } catch (error) {
        console.error(`Error handling GetFeed:`, error);
        res.status(400).json({ error: error.message });
    }
});

/**
 * Auto-generated route for SubmitItemReq
 * Path: SubmitItem
 * Generated from: feed_api.rs
 */
server.app.post('/api/SubmitItem', async (req, res) => {
    const host = req.tenant?.host || 'localhost';
    
    try {
        // Extract request data
        let requestData = req.body;
        
        // Field validation
    if (!requestData.title || requestData.title.trim() === '') {
        return res.status(400).json({ error: 'title is required' });
    }
        
        // Ensure context exists
        if (!req.context) {
            req.context = { host };
        }
        
        // Context injection
        requestData = {
            ...requestData,
        };
        
        // Call Elm business logic
        const elmService = server.getService('elm');
        if (!elmService) {
            throw new Error('Elm service not available');
        }
        
        const result = await elmService.callHandler('SubmitItem', requestData, {
            host,
            user_id: req.context?.user_id || null,
            is_extension: req.context?.is_extension || false,
            tenant: host
        });
        
        res.json(result);
        
    } catch (error) {
        console.error(`Error handling SubmitItem:`, error);
        res.status(400).json({ error: error.message });
    }
});

/**
 * Auto-generated route for GetTagsReq
 * Path: GetTags
 * Generated from: tags_api.rs
 */
server.app.post('/api/GetTags', async (req, res) => {
    const host = req.tenant?.host || 'localhost';
    
    try {
        // Extract request data
        let requestData = req.body;
        
        // Field validation

        
        // Ensure context exists
        if (!req.context) {
            req.context = { host };
        }
        
        // Context injection
        requestData = {
            ...requestData,
        host: req.context.host
        
        };
        
        // Call Elm business logic
        const elmService = server.getService('elm');
        if (!elmService) {
            throw new Error('Elm service not available');
        }
        
        const result = await elmService.callHandler('GetTags', requestData, {
            host,
            user_id: req.context?.user_id || null,
            is_extension: req.context?.is_extension || false,
            tenant: host
        });
        
        res.json(result);
        
    } catch (error) {
        console.error(`Error handling GetTags:`, error);
        res.status(400).json({ error: error.message });
    }
});
    
    console.log(`âœ… Registered ${4} auto-generated API routes`);
}
