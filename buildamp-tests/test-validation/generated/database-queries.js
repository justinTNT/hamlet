/**
 * Auto-Generated Database Query Functions
 * Generated from models in src/models/db/
 * 
 * ⚠️  DO NOT EDIT THIS FILE MANUALLY
 * ⚠️  Changes will be overwritten during next generation
 * 
 * This file replaces dangerous SQL string manipulation with type-safe,
 * pre-validated database queries that include automatic tenant isolation.
 */

// Factory function that takes a pool and returns bound query functions
export default function createDbQueries(pool) {
// Auto-generated database functions for BlogPost

/**
 * Insert BlogPost with automatic tenant isolation
 */
async function insertBlogPost(blogpost, host) {
    const result = await pool.query(
        'INSERT INTO blog_post (data, created_at, view_count, host) VALUES ($2, $3, $4, $1) RETURNING *',
        [host, blogpost.data, blogpost.created_at, blogpost.view_count]
    );
    return result.rows[0];
}

/**
 * Get all BlogPosts for a tenant
 */
async function getBlogPostsByHost(host) {
    const result = await pool.query(
        'SELECT * FROM blog_post WHERE host = $1 ORDER BY created_at DESC',
        [host]
    );
    return result.rows;
}

/**
 * Get BlogPost by ID with tenant isolation
 */
async function getBlogPostById(id, host) {
    const result = await pool.query(
        'SELECT * FROM blog_post WHERE id = $1 AND host = $2',
        [id, host]
    );
    return result.rows[0] || null;
}

/**
 * Update BlogPost with tenant isolation
 */
async function updateBlogPost(id, updates, host) {
    const updateFields = Object.keys(updates).filter(key => key !== 'id' && key !== 'host');
    const setClause = updateFields.map((field, i) => field + ' = $' + (i + 3)).join(', ');
    const values = updateFields.map(field => updates[field]);
    
    if (setClause === '') {
        return getBlogPostById(id, host);
    }
    
    const sql = 'UPDATE blog_post SET ' + setClause + ', updated_at = NOW() WHERE id = $1 AND host = $2 RETURNING *';
    const result = await pool.query(sql, [id, host, ...values]);
    return result.rows[0] || null;
}

/**
 * Delete BlogPost with tenant isolation
 */
async function deleteBlogPost(id, host) {
    const result = await pool.query(
        'DELETE FROM blog_post WHERE id = $1 AND host = $2 RETURNING id',
        [id, host]
    );
    return result.rows.length > 0;
}

// Auto-generated database functions for BlogPostData

/**
 * Insert BlogPostData with automatic tenant isolation
 */
async function insertBlogPostData(blogpostdata, host) {
    const result = await pool.query(
        'INSERT INTO blog_post_data (title, content, excerpt, author_note, host) VALUES ($2, $3, $4, $5, $1) RETURNING *',
        [host, blogpostdata.title, blogpostdata.content, blogpostdata.excerpt, blogpostdata.author_note]
    );
    return result.rows[0];
}

/**
 * Get all BlogPostDatas for a tenant
 */
async function getBlogPostDatasByHost(host) {
    const result = await pool.query(
        'SELECT * FROM blog_post_data WHERE host = $1 ORDER BY created_at DESC',
        [host]
    );
    return result.rows;
}

/**
 * Get BlogPostData by ID with tenant isolation
 */
async function getBlogPostDataById(id, host) {
    const result = await pool.query(
        'SELECT * FROM blog_post_data WHERE id = $1 AND host = $2',
        [id, host]
    );
    return result.rows[0] || null;
}

/**
 * Update BlogPostData with tenant isolation
 */
async function updateBlogPostData(id, updates, host) {
    const updateFields = Object.keys(updates).filter(key => key !== 'id' && key !== 'host');
    const setClause = updateFields.map((field, i) => field + ' = $' + (i + 3)).join(', ');
    const values = updateFields.map(field => updates[field]);
    
    if (setClause === '') {
        return getBlogPostDataById(id, host);
    }
    
    const sql = 'UPDATE blog_post_data SET ' + setClause + ', updated_at = NOW() WHERE id = $1 AND host = $2 RETURNING *';
    const result = await pool.query(sql, [id, host, ...values]);
    return result.rows[0] || null;
}

/**
 * Delete BlogPostData with tenant isolation
 */
async function deleteBlogPostData(id, host) {
    const result = await pool.query(
        'DELETE FROM blog_post_data WHERE id = $1 AND host = $2 RETURNING id',
        [id, host]
    );
    return result.rows.length > 0;
}

// Auto-generated database functions for Category

/**
 * Insert Category with automatic tenant isolation
 */
async function insertCategory(category, host) {
    const result = await pool.query(
        'INSERT INTO category (id, name, description, host) VALUES ($2, $3, $4, $1) RETURNING *',
        [host, category.id, category.name, category.description]
    );
    return result.rows[0];
}

/**
 * Get all Categorys for a tenant
 */
async function getCategorysByHost(host) {
    const result = await pool.query(
        'SELECT * FROM category WHERE host = $1 ORDER BY created_at DESC',
        [host]
    );
    return result.rows;
}

/**
 * Get Category by ID with tenant isolation
 */
async function getCategoryById(id, host) {
    const result = await pool.query(
        'SELECT * FROM category WHERE id = $1 AND host = $2',
        [id, host]
    );
    return result.rows[0] || null;
}

/**
 * Update Category with tenant isolation
 */
async function updateCategory(id, updates, host) {
    const updateFields = Object.keys(updates).filter(key => key !== 'id' && key !== 'host');
    const setClause = updateFields.map((field, i) => field + ' = $' + (i + 3)).join(', ');
    const values = updateFields.map(field => updates[field]);
    
    if (setClause === '') {
        return getCategoryById(id, host);
    }
    
    const sql = 'UPDATE category SET ' + setClause + ', updated_at = NOW() WHERE id = $1 AND host = $2 RETURNING *';
    const result = await pool.query(sql, [id, host, ...values]);
    return result.rows[0] || null;
}

/**
 * Delete Category with tenant isolation
 */
async function deleteCategory(id, host) {
    const result = await pool.query(
        'DELETE FROM category WHERE id = $1 AND host = $2 RETURNING id',
        [id, host]
    );
    return result.rows.length > 0;
}

// Auto-generated database functions for PostCategory

/**
 * Insert PostCategory with automatic tenant isolation
 */
async function insertPostCategory(postcategory, host) {
    const result = await pool.query(
        'INSERT INTO post_category (post_id, category_id, host) VALUES ($2, $3, $1) RETURNING *',
        [host, postcategory.post_id, postcategory.category_id]
    );
    return result.rows[0];
}

/**
 * Get all PostCategorys for a tenant
 */
async function getPostCategorysByHost(host) {
    const result = await pool.query(
        'SELECT * FROM post_category WHERE host = $1 ORDER BY created_at DESC',
        [host]
    );
    return result.rows;
}

/**
 * Get PostCategory by ID with tenant isolation
 */
async function getPostCategoryById(id, host) {
    const result = await pool.query(
        'SELECT * FROM post_category WHERE id = $1 AND host = $2',
        [id, host]
    );
    return result.rows[0] || null;
}

/**
 * Update PostCategory with tenant isolation
 */
async function updatePostCategory(id, updates, host) {
    const updateFields = Object.keys(updates).filter(key => key !== 'id' && key !== 'host');
    const setClause = updateFields.map((field, i) => field + ' = $' + (i + 3)).join(', ');
    const values = updateFields.map(field => updates[field]);
    
    if (setClause === '') {
        return getPostCategoryById(id, host);
    }
    
    const sql = 'UPDATE post_category SET ' + setClause + ', updated_at = NOW() WHERE id = $1 AND host = $2 RETURNING *';
    const result = await pool.query(sql, [id, host, ...values]);
    return result.rows[0] || null;
}

/**
 * Delete PostCategory with tenant isolation
 */
async function deletePostCategory(id, host) {
    const result = await pool.query(
        'DELETE FROM post_category WHERE id = $1 AND host = $2 RETURNING id',
        [id, host]
    );
    return result.rows.length > 0;
}

    // Return all functions bound to the pool
    return {
        insertBlogPost,
        getBlogPostsByHost,
        getBlogPostById,
        updateBlogPost,
        deleteBlogPost,
        insertBlogPostData,
        getBlogPostDatasByHost,
        getBlogPostDataById,
        updateBlogPostData,
        deleteBlogPostData,
        insertCategory,
        getCategorysByHost,
        getCategoryById,
        updateCategory,
        deleteCategory,
        insertPostCategory,
        getPostCategorysByHost,
        getPostCategoryById,
        updatePostCategory,
        deletePostCategory
    };
}
